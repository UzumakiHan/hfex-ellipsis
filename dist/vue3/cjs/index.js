"use strict";var t=require("vue"),e={name:"HfexEllipsis",props:{text:{type:String,default:"",required:!0},maxLines:{type:Number,default:3},width:{type:Number,default:100}},data(){return{expanded:!1,slotBoxWidth:0,showSlotNode:!1,offset:this.text.length,textBoxWidth:this.width}},computed:{boxStyle(){return this.width?{width:`${this.width}%`}:""},realText(){const t=this.offset!==this.text.length;let e=this.text;return t&&!this.expanded&&(e=`${this.text.slice(0,this.offset)}...`),e}},mounted(){const{len:t}=this.getLines();t>this.maxLines&&(this.showSlotNode=!0,this.$nextTick((()=>{this.slotBoxWidth=this.$refs.slotRef.clientWidth,this.textBoxWidth=this.$refs.textOverflow.clientWidth,this.calculateOffset(0,this.text.length)})))},methods:{getLines(){const t=this.$refs.overEllipsis.getClientRects();return{len:t.length,lastWidth:t[t.length-1].width}},isOverflow(){const{len:t,lastWidth:e}=this.getLines();if(t<this.maxLines)return!1;if(this.maxLines){const s=Boolean(t===this.maxLines&&e+this.slotBoxWidth>this.textBoxWidth);if(t>this.maxLines||s)return!0}return!1},calculateOffset(t,e){this.$nextTick((()=>{Math.abs(t-e)<=1||(this.isOverflow()?e=this.offset:t=this.offset,this.offset=Math.floor((t+e)/2),this.calculateOffset(t,e))}))},toggle(){this.expanded=!this.expanded}}};const s={key:0,ref:"slotRef",class:"slot-box"};!function(t,e){void 0===e&&(e={});var s=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===s&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".slot-box[data-v-21fec300] {\n  display: inline-block;\n}"),e.render=function(e,i,o,l,n,h){return t.openBlock(),t.createElementBlock("div",{ref:"textOverflow",class:"text-overflow",style:t.normalizeStyle(h.boxStyle)},[t.createElementVNode("span",{ref:"overEllipsis"},t.toDisplayString(h.realText),513),n.showSlotNode?(t.openBlock(),t.createElementBlock("span",s,[t.renderSlot(e.$slots,"default",{clickToggle:h.toggle,expanded:n.expanded})],512)):t.createCommentVNode("v-if",!0)],4)},e.__scopeId="data-v-21fec300",e.__file="src/vue/index.vue",e.install=t=>{t.component(e.name,e)},module.exports=e;
